%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[12pt]{report}
\usepackage[spanish]{babel}
\usepackage[latin1]{inputenc}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{listings}   
\usepackage{hyperref}
\usepackage{color}
\usepackage{pdfpages}



% Default fixed font does not support bold face
\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{12} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{12}  % for normal

% Custom colors
\usepackage{color}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}

\usepackage{listings}
\newcommand\pythonstyle{\lstset{
language=Python,
basicstyle={\small\ttfamily},
aboveskip=3mm,
columns=flexible,
breaklines=true,
breakatwhitespace=true,
tabsize=3,
belowskip=3mm,
otherkeywords={self},             % Add keywords here
keywordstyle=\ttfamily\color{deepblue},
emph={MyClass,__init__},          % Custom highlighting
emphstyle=\ttfamily\color{deepred},    % Custom highlighting style
stringstyle=\color{deepgreen},
frame=tb,                         % Any extra options here
showstringspaces=false            % 
}}

\lstnewenvironment{python}[1][]
{
\pythonstyle
\lstset{#1}
}
{}


\begin{document}

\begin{titlepage}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}} % Defines a new command for the horizontal lines, change thickness here

\center % Center everything on the page
 

\textsc{\LARGE Universidad de Buenos Aires}\\[1.5cm] % Name of your university/college
\textsc{\Large TP Python}\\[0.5cm] % Major heading such as course name
\textsc{\large 2015-2016}\\[0.5cm] % Minor heading such as course title


\HRule \\[0.4cm]
{ \huge \bfseries Python NetHack}\\[0.4cm] % Title of your document
\HRule \\[1.5cm]
 

\begin{minipage}{0.4\textwidth}
\begin{center}
Nicolas \textsc{Slimmens}\\
Jean \textsc{Guis}\\
\end{center}
\end{minipage}

\bigskip


{\large 9 de noviembre 2015}\\[4cm] % Date, change the \today to a set date if you want to be precise

%----------------------------------------------------------------------------------------
%	LOGO SECTION
%----------------------------------------------------------------------------------------

\includegraphics[scale=1]{images/uba.png}\\[1cm] % Include a department/university logo - this will require the graphicx package
 
%----------------------------------------------------------------------------------------

\vfill % Fill the rest of the page with whitespace

\end{titlepage}


\tableofcontents
\chapter{NetHack}

\section{Análisis del sujeto}
Aliquam a feugiat arcu. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec maximus, lorem quis bibendum hendrerit, massa arcu hendrerit sapien, vitae semper leo turpis sed erat. Praesent nunc eros, vulputate eu mi nec, porttitor malesuada enim. Donec maximus imperdiet mauris, vel consequat diam faucibus non. Nam pretium quam mauris, et facilisis est congue suscipit. Donec eu interdum diam. Pellentesque elementum elit quis condimentum consectetur. Nulla facilisi. Fusce ut urna ac neque feugiat ornare non vel ipsum. Vivamus consequat, risus vitae pulvinar feugiat, turpis ante iaculis ligula, vel elementum felis leo a metus. Nullam pharetra congue arcu vel tempus. Nulla facilisi. Fusce ut urna ac neque feugiat ornare non vel ipsum. Vivamus consequat, risus vitae pulvinar feugiat, turpis ante iaculis ligula, vel elementum felis leo a metus. Nullam pharetra congue arcu vel tempus. Nulla facilisi. Fusce ut urna ac neque feugiat ornare non vel ipsum. Vivamus consequat, risus vitae pulvinar feugiat, turpis ante iaculis ligula, vel elementum felis leo a metus. Nullam pharetra congue arcu vel tempus. 
\section{Análisis}
\subsection{juego.py}
\subsubsection{Carga de la mapa}
La primera cosas que necesitamos de hacer es de carga la mapa desde un archivo con el extension \emph{.map}. Los archivos dado tienen un archivo que se llama \emph{juego.py} que contiene la Class Juego. \\\\
La mapas en tienen el formato siguiente por ejemplo:
\begin{python}
####################
#.................@#
#..g...............#
#..................#
#..................#
#..................#
#.##################
#..................#
#........o.........#
#..g...............#
#..................#
#..........g.......#
#..................#
##################.#
#..................#
#..........$....o..#
#..................#
#...o..............#
#.<.oo.............#
#...o..............#
####################
\end{python}
En el init de la clase, se lee la mapa y le agrega a una lista con este formato, con un string para cada linea:
\begin{python}
filas =  ["####################", "#.................@#", ...]
\end{python}
Necessitamos decir que ahora no hay hero, y tambien crear una instancia de la classe \emph{Mapa} para recibir la mapa.
\begin{python}
posHero = 0
mapa = Mapa(len(filas[0]), len(filas))
\end{python}
El algorithmo que imprime la mapa impreme la mapa carater para carater pero no en el sentido común. Necesitamos de invertir la lista.
Ejemplo de lista.
\begin{python}
a b c d e f
g h i j k l m
n o p q r s 
t u v w x y
\end{python}
Ejemblo de lista invertio.
\begin{python}
a g n t
b h o u
c i p v 
d k q w
e l r x
f m s y
\end{python}
Utilizamos :
\begin{python}
reverse = zip(*filas)
for i in xrange(len(reverse)):
reverse[i] = ''.join(reverse[i])
filas = reverse
del reverse
\end{python}
\subsubsection{Arrancar y deterner el juego}
\subsection{actores.py}
\subsubsection{La classe Actor}
\subsubsection{La classe Heroe}
\subsubsection{La classe Pared}
\subsubsection{La classe Goblin}
\subsubsection{La classe Orco}
\subsubsection{La classe Moneda}
\subsubsection{La classe Salida}
\subsection{mapa.py}




\begin{python}
		minLeft = min(self.getGridDimension()[1] - lastPlayed[0]-2, lastPlayed[1]) 
		minRight =  min(lastPlayed[0]+1, self.getGridDimension()[0]-lastPlayed[1]-1)

		xstart = lastPlayed[1] - minLeft # Starting x coordinate
		ystart = lastPlayed[0] + minLeft + 1 # Starting y coordinate

		if(self.getGridDimension()[0] - xstart >= 4 and ystart >= 4): 
			result = []
			nbCase =  min(ystart - 3 , self.getGridDimension()[0] - (xstart +3))
			for i in xrange(0,nbCase):
				result.append([self.grid[ystart-i][xstart+i], self.grid[ystart-1-i][xstart+1+i],
					self.grid[ystart-2-i][xstart+2+i],self.grid[ystart-3-i][xstart+3+i]])
			if [player for t in range(0,4)] in result:
				return player
\end{python}


\chapter{El código}


\begin{thebibliography}{9}
\bibitem{latexcompanion} 
Mark Lutz,
\textit{Learning Python}. 
O'Reilly, Fourth edition, ISBN: 978-0-596-15806-4, September 2009.

\end{thebibliography}


\end{document}